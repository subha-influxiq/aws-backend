<app-admin-header></app-admin-header>

<mat-card class="admin_wrapper">
  <mat-card-content class="content_wrapper">

    <mat-card-content class="itemsection">
      <span class="icon">
        <img src="../../../../assets/images/adminDoctoricon1.png">
      </span>
      <span class="counteer">
        <h4 class="dataCount"> {{ allResolveData.totalDoctorCount }}</h4>
        <p class="doctorNumber">Total Number of Doctors</p>
      </span>
      <span class="button_wrapper">
        <button mat-button [routerLink]="['/admin/doctor-management']">View Details</button>
      </span>
    </mat-card-content>

    <mat-card-content class="itemsection">
      <span class="icon">
        <img src="../../../../assets/images/adminDoctoricon2.png">
      </span>
      <span class="counteer">
        <h4 class="dataCount"> {{ allResolveData.totalBillerCount }}</h4>
        <p class="doctorNumber">Total Number of Billers</p>
      </span>
      <span class="button_wrapper">
        <button mat-flat-button [routerLink]="['/admin/biller-management']">View Details</button>
      </span>
    </mat-card-content>

    <mat-card-content class="itemsection">
      <span class="icon">
        <img src="../../../../assets/images/adminDoctoricon3.png">
      </span>
      <span class="counteer">
        <h4 class="dataCount"> {{ allResolveData.totalTechCount }}</h4>
        <p class="doctorNumber">Total Number of Techs</p>
      </span>
      <span class="button_wrapper">
        <button mat-flat-button [routerLink]="['/admin/tech-management']">View Details</button>
      </span>
    </mat-card-content>

  </mat-card-content>


  <!-- Doctor occide related -->
  <mat-card-content class="content_wrapper">

    <mat-card-content class="itemsection">
      <span class="icon">
        <img src="../../../../assets/images/adminDoctoricon1.png">
      </span>
      <span class="counteer">
        <h4 class="dataCount"> {{ allResolveData.doctorOfficeCount }}</h4>
        <p class="doctorNumber">Total No of Doctor's Office</p>
      </span>
      <span class="button_wrapper">
        <button mat-button [routerLink]="['/admin/doctor-management']">View Details</button>
      </span>
    </mat-card-content>

    <mat-card-content class="itemsection">
      <span class="icon">
        <img src="../../../../assets/images/adminDoctoricon2.png">
      </span>
      <span class="counteer">
        <h4 class="dataCount"> {{ allResolveData.appointmentsPendingCount }}</h4>
        <p class="doctorNumber">Total Appointments Pending</p>
      </span>
      <span class="button_wrapper">
        <button mat-flat-button [routerLink]="['/admin/biller-management']">View Details</button>
      </span>
    </mat-card-content>

    <mat-card-content class="itemsection">
      <span class="icon">
        <img src="../../../../assets/images/adminDoctoricon3.png">
      </span>
      <span class="counteer">
        <h4 class="dataCount"> {{ allResolveData.appointmentsCompletedCount }}</h4>
        <p class="doctorNumber">Total Appointments Completed</p>
      </span>
      <span class="button_wrapper">
        <button mat-flat-button [routerLink]="['/admin/tech-management']">View Details</button>
      </span>
    </mat-card-content>

  </mat-card-content>



  <mat-card-content class="admin_superbillsection">
    <h1>Physician Report Process Status</h1>
    <mat-card-content class="biller_wrapper">

      <mat-card-content class="super_bill_item sp_one">
        <span class="border_wrapper">
          <mat-card-content class="circle">
            <img src="../../../../assets/images/reporticon1.png">
          </mat-card-content>
        </span>

        <span class="container_wrapper">
          <p>Total No of <br>
            Image Not Process
          </p>
          <h2> {{ allResolveData.totalImageNotProcessCount }} </h2>
          <button mat-flat-button routerLink="/admin/image-not-process">view all</button>
        </span>
      </mat-card-content>

      <mat-card-content class="super_bill_item sp_two">
        <span class="border_wrapper">
          <mat-card-content class="circle">
            <img src="../../../../assets/images/reporticon2.png">
          </mat-card-content>
        </span>

        <span class="container_wrapper">
          <p>Total No of <br>
            Text Not Process
          </p>
          <h2> {{ allResolveData.totalTextNotProcessCount }} </h2>
          <button mat-flat-button routerLink="/admin/text-not-process">view all</button>
        </span>
      </mat-card-content>

    </mat-card-content>
  </mat-card-content>


  <mat-card-content class="admin_superbillsection">
    <h1>Physician Report and Super Bills</h1>
    <mat-card-content class="biller_wrapper">

      <mat-card-content class="super_bill_item sp_one">
        <span class="border_wrapper">
          <mat-card-content class="circle">
            <img src="../../../../assets/images/reporticon1.png">
          </mat-card-content>
        </span>

        <span class="container_wrapper">
          <p>Total No of <br>
            Reports Uploaded
          </p>
          <h2> {{ allResolveData.totalReportCount }} </h2>
          <button mat-flat-button (click)="viewReportProcessData('Reports Uploaded')">view all</button>
        </span>
      </mat-card-content>

      <mat-card-content class="super_bill_item sp_two">
        <span class="border_wrapper">
          <mat-card-content class="circle">
            <img src="../../../../assets/images/reporticon2.png">
          </mat-card-content>
        </span>

        <span class="container_wrapper">
          <p>Total No of <br>
            Report Processed
          </p>
          <h2> {{ allResolveData.processedReportCount }} </h2>
          <button mat-flat-button (click)="viewReportProcessData('Report Processed')">view all</button>
        </span>
      </mat-card-content>

      <mat-card-content class="super_bill_item sp_three">
        <span class="border_wrapper">
          <mat-card-content class="circle">
            <img src="../../../../assets/images/reporticon3.png">
          </mat-card-content>
        </span>
        <span class="container_wrapper">
          <p>Total No of <br>
            Report Signed
          </p>
          <h2> {{ allResolveData.signReportCount }} </h2>
          <button mat-flat-button (click)="viewReportProcessData('Report Signed')">view all</button>
        </span>
      </mat-card-content>

      <mat-card-content class="super_bill_item sp_four">
        <span class="border_wrapper">
          <mat-card-content class="circle">
            <img src="../../../../assets/images/reporticon4.png">
          </mat-card-content>
        </span>
        <span class="container_wrapper">
          <p> Sent to <br>
            Biller
          </p>
          <h2> {{ allResolveData.sendToSuparBillerReportCount }} </h2>
          <button mat-flat-button (click)="viewReportProcessData('Super Bill')">view all</button>
        </span>
      </mat-card-content>

    </mat-card-content>
  </mat-card-content>



  <!-- All Data listing start here(default listing) -->
  <mat-card-content class="table_wrapper">

    <mat-toolbar class="top_header">
      <h2> Patient Record Report </h2>
      <button class="add_new" mat-button routerLink="/admin/patient-management/add">add patient records
        manually</button>
    </mat-toolbar>

    <mat-toolbar class="action_bar">
      <mat-form-field>
        <input matInput placeholder="Search by Doctor" (keyup)="filterByName('doctorName_search_regex', $event.target.value)">
      </mat-form-field>

      <mat-form-field>
        <input matInput placeholder="Search by Patient"
          (keyup)="filterByName('patientName_search_regex', $event.target.value)">
      </mat-form-field>

      <mat-form-field class="parent_cat">
        <mat-select placeholder="Search By Status" (selectionChange)="filterByName('status_search_regex', $event.value)">
          <mat-option value=0>Select a status</mat-option>
          <mat-option value="waiting for doctor sign">Waiting For Doctor Sign</mat-option>
          <mat-option value="doctor signed">Doctor Signed</mat-option>
          <mat-option value="send to biller">Send To Biller</mat-option>
          <mat-option value="error">Error</mat-option>
          <mat-option value="pending">Pending</mat-option>
        </mat-select>
      </mat-form-field>

      <ng-container>
        <span class="date-range">
          <mat-form-field>
            <input matInput [matDatepicker]="picker1" placeholder="Start Date" [(ngModel)]="startDate">
            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
          </mat-form-field>

          <mat-form-field>
            <input matInput [matDatepicker]="picker2" placeholder="End Date" [(ngModel)]="endDate">
            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
          </mat-form-field>
        </span>
        <button mat-raised-button color="primary" class="add_button" (click)="dateRangeSearch()">Search</button>
      </ng-container>

    </mat-toolbar>

    <table mat-table [dataSource]="allDataSource" class="mat-elevation-z8 adminTables">
      <ng-container matColumnDef="no">
        <th mat-header-cell *matHeaderCellDef> No. </th>
        <td mat-cell *matCellDef="let element; let i = index;"> {{ i + 1 }} </td>
      </ng-container>

      <ng-container matColumnDef="patientNamecopy">
        <th mat-header-cell *matHeaderCellDef> Patient Name. </th>
        <td mat-cell *matCellDef="let element" data-label="Patient Name"> {{ element.patientName }} </td>
      </ng-container>

      <ng-container matColumnDef="doctorName">
        <th mat-header-cell *matHeaderCellDef> Doctor Name</th>
        <td mat-cell *matCellDef="let element" data-label="Doctor Name" innerHTML="{{ element.doctorname }}"> </td>
      </ng-container>

      <ng-container matColumnDef="billerName">
        <th mat-header-cell *matHeaderCellDef> Biller Name</th>
        <td mat-cell *matCellDef="let element" data-label="Biller Name"> {{ element.billername }} </td>
      </ng-container>

      <ng-container matColumnDef="record">
        <th mat-header-cell *matHeaderCellDef> Record </th>
        <td mat-cell *matCellDef="let element; let i = index;">
          <button mat-button *ngIf="element.report_type == 'mannual' || (element.report_type == 'file' && element.images)" class="viewButton" type="button" [routerLink]="['/admin/patient-record',element._id]">View</button>
          <button mat-button *ngIf="element.report_type == 'file' && !element.images" class="viewButton" type="button">Processing</button>
        </td>
      </ng-container>

      <ng-container matColumnDef="report_type">
        <th mat-header-cell *matHeaderCellDef> Record Type</th>
        <td mat-cell *matCellDef="let element" data-label="Record Type"> {{ element.report_type }} </td>
      </ng-container>


      <ng-container matColumnDef="billGenerationDate">
        <th mat-header-cell *matHeaderCellDef> Bill Generation Date</th>
        <td mat-cell *matCellDef="let element" data-label="Bill Generation Date"> {{ element.billGenerationDate }} </td>
      </ng-container>

      <ng-container matColumnDef="techName">
        <th mat-header-cell *matHeaderCellDef> Tech Name</th>
        <td mat-cell *matCellDef="let element" data-label="Tech Name"> {{ element.techname }} </td>
      </ng-container>

      <ng-container matColumnDef="billSentDate">
        <th mat-header-cell *matHeaderCellDef> Bill SentDate</th>
        <td mat-cell *matCellDef="let element" data-label="Bill Sent Date"> {{ element.billSentDate }} </td>
      </ng-container>

      <ng-container matColumnDef="superBill">
        <th mat-header-cell *matHeaderCellDef> Super Bill</th>
        <td mat-cell *matCellDef="let element" data-label="Super Bill"> {{ element.superBill }} </td>
      </ng-container>

      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef> Date</th>
        <td mat-cell *matCellDef="let element" data-label="Date"> {{ element.date }} </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef> Status</th>
        <td mat-cell *matCellDef="let element" data-label="Status">
          <ng-container *ngIf="element.report_type == 'file' && !element.images">Data Processing</ng-container>
          <ng-container *ngIf="element.report_type == 'mannual' || (element.report_type == 'file' && element.images)"> {{ element.status_text }} </ng-container>
        </td>
      </ng-container>

      <ng-container matColumnDef="editRecord">
        <th mat-header-cell *matHeaderCellDef> Action </th>
        <td mat-cell *matCellDef="let element; let i = index;">
          <button mat-button type="button" *ngIf="element.report_type == 'mannual' || (element.report_type == 'file' && element.images)" class="editButton" [routerLink]="['/admin/patient-record/edit',element._id]">Edit</button>
          <button mat-button type="button" *ngIf="element.report_type == 'file' && !element.images" class="editButton downloadBtn">Processing</button>
          <button mat-button type="button" *ngIf="element.status != 1" class="editButton downloadBtn" (click)="downloadReport(element.download_link);">Download</button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="allDataColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: allDataColumns;let i = index"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[25, 50, 100, 200, 500]"></mat-paginator>
  </mat-card-content>
  <!-- dashboard all listing end here -->
</mat-card>
 
<app-admin-footer></app-admin-footer>
